<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <title>Courses</title>
  <style>
    .form-group {
      margin: 10px;
    }
  </style>
</head>

<body>
  <%- include("header") %>
    <section id="course-form">
      <div class="container-lg">
        <form method="post" action="/courses/create" onsubmit="return addCourse();">
          <div class="form-group">
            <label for="exampleFormControlInput1">Course ID</label>
            <input required name="courseid" type="text" class="form-control" id="courseid"
              placeholder="CPTS_123">
          </div>
          <div class="form-group">
            <label for="exampleFormControlInput1">Course Name</label>
            <input required name="coursename" type="text" class="form-control" id="coursename"
              placeholder="Artificial Intelligence">
          </div>
          <div class="form-group">
            <label for="exampleFormControlSelect1">Semester</label>
            <select name="semester" class="form-control" id="semester">
              <option value="Spring">Spring</option>
              <option value="Summer">Summer</option>
              <option value="Fall">Fall</option>
            </select>
          </div>
          <div class="form-group">
            <label for="exampleFormControlTextarea1">Course Description</label>
            <textarea name="coursedesc" class="form-control" id="coursedesc" rows="3"></textarea>
          </div>
          <div class="form-group">
            <input type="number" id="enrollnum" name="enrollnum" min="50" max="100" value="50" step="10">
            <label for="volume">Enrollment Limit</label>
          </div>
          <div class="form-group">
            <input type="submit" value="Add Course" class="btn btn-primary"></button>
          </div>
        </form>
        <div></div>
        <div id="alertmessages">
          <%- include("coursemsg")%>
        </div>
      </div>
    </section>
    <section id="course-details">
      <div class="container-lg">
        <div class="p-lg-2 text-center bg-light">
          <h1>Courses</h1>
        </div>
        <table class="table table-hover" id="courselist">
          <thead>
            <tr>
              <th scope="col">Course ID</th>
              <th scope="col">Course Name</th>
              <th scope="col">Semester</th>
              <th scope="col">Enrollment Limit</th>
            </tr>
          </thead>
          <tbody>
            <!-- 
              <% for (course of courses) { %>
              <tr>
                <td scope="row"> <button id=<%="modal" +course.courseid %> type="button" class="btn btn-link"
                    data-bs-toggle="modal" data-bs-target=<%= "#exampleModal" +course.courseid %>>
                      <%= course.courseid %>
                  </button></td>
                <td>
                  <%= course.coursename %>
                </td>
                <td>
                  <%= course.semester %>
                </td>
                <td>
                  <%= course.enrollnum %>
                </td>
              </tr>
              <% } %> 
            -->
          </tbody>
        </table>
        <%if (!locals.courses || courses.length==0) { %>
          <p> No courses to list! </p>
          <% } %>
      </div>
    </section>
    <section id="coursemodals">
      <!-- Modals -->
      <% for (course of courses) { %>
        <div class="modal fade" id=<%="exampleModal" +course.courseid %> tabindex="-1"
          aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Course Details</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <div class="card mb-4">
                  <div class="card-body">
                    <div class="row">
                      <div class="col-sm-3">
                        <p class="mb-0">Course ID</p>
                      </div>
                      <div class="col-sm-9">
                        <p class="text-primary mb-0">
                          <%= course.courseid %>
                        </p>
                      </div>
                    </div>
                    <hr>
                    <div class="row">
                      <div class="col-sm-3">
                        <p class="mb-0">Course Name</p>
                      </div>
                      <div class="col-sm-9">
                        <p class="text-primary mb-0">
                          <%= course.coursename %>
                        </p>
                      </div>
                    </div>
                    <hr>
                    <div class="row">
                      <div class="col-sm-3">
                        <p class="mb-0">Semester</p>
                      </div>
                      <div class="col-sm-9">
                        <p class="text-primary mb-0">
                          <%= course.semester %>
                        </p>
                      </div>
                    </div>
                    <hr>
                    <div class="row">
                      <div class="col-sm-3">
                        <p class="mb-0">Max Enrollment</p>
                      </div>
                      <div class="col-sm-9">
                        <p class="text-primary mb-0">
                          <%= course.enrollnum %>
                        </p>
                      </div>
                    </div>
                    <hr>
                    <div class="row">
                      <div class="col-sm-3">
                        <p class="mb-0">Course Description</p>
                      </div>
                      <div class="col-sm-9">
                        <p class="text-muted mb-0">
                          <%= course.coursedesc %>
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <a class="btn btn-primary" id=<%="deleteModalButton" +course.courseid %> href="/courses"
                  data-bs-toggle="modal" data-bs-target=<%= "#deleteModal" +course.courseid %> role="button">
                    Delete Course
                </a>
              </div>
            </div>
          </div>
        </div>
        <div class="modal fade" id=<%="deleteModal" +course.courseid %> tabindex="-1"
          aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Course Deletion</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                This operation can not be reversed. Do you sure want to proceed?
              </div>
              <div class="modal-footer">
                <form action=<%="/courses/delete/" +course.courseid %> method="get">
                  <input type="submit" class="btn btn-danger" value="Delete">
                </form>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <!-- <button type="button" class="btn btn-danger">Save changes</button> -->
              </div>
            </div>
          </div>
        </div>
        <%}%>
    </section>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"></script>
    <script src="/javascripts/courses.js"></script>
</body>

</html>